<!-- 这是动态加载的内容模板 -->
<div class="page-card">
    <div class="page-header">
        <h2>成绩审核</h2>
        <div class="header-actions">
            <button class="btn btn-primary" id="refresh-reviews-btn">
                <i class="fas fa-sync-alt"></i> 刷新
            </button>
        </div>
    </div>
    
    <div class="search-filter">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="search-course" placeholder="搜索课程名称或编号...">
        </div>
        <div class="filter-group">
            <select id="filter-semester">
                <option value="">所有学期</option>
                <option value="2025-2026-1">2025-2026学年 第1学期</option>
                <option value="2025-2026-2">2025-2026学年 第2学期</option>
            </select>
            <select id="filter-warning">
                <option value="">所有状态</option>
                <option value="has_warning">有异常警告</option>
                <option value="no_warning">无异常警告</option>
            </select>
            <button class="btn btn-outline" id="reset-grade-filters">
                <i class="fas fa-redo"></i> 重置
            </button>
        </div>
    </div>
    
    <div class="table-container">
        <div class="table-responsive">
            <table class="data-table" id="grade-review-table">
                <thead>
                    <tr>
                        <th width="50px">
                            <input type="checkbox" id="select-all">
                        </th>
                        <th>课程信息</th>
                        <th>学期</th>
                        <th>成绩状态</th>
                        <th>异常警告</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="grade-review-body">
                    <!-- 成绩审核数据将通过JS动态加载 -->
                </tbody>
            </table>
        </div>
        
        <div class="loading" id="review-loading">
            <div class="spinner"></div>
        </div>
        
        <div class="empty-state" id="review-empty" style="display: none;">
            <i class="fas fa-clipboard-check"></i>
            <h3>暂无待审核的成绩</h3>
            <p>所有成绩均已审核通过</p>
        </div>
        
        <div class="pagination" id="review-pagination"></div>
        
        <div class="batch-actions" id="batch-actions" style="display: none; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eaeaea;">
            <h4>批量操作</h4>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button class="btn btn-success" id="batch-approve-btn">
                    <i class="fas fa-check-circle"></i> 批量审核通过
                </button>
                <button class="btn btn-danger" id="batch-reject-btn">
                    <i class="fas fa-times-circle"></i> 批量退回修改
                </button>
                <button class="btn btn-secondary" id="cancel-batch">
                    <i class="fas fa-times"></i> 取消选择
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 成绩详情模态框模板 -->
<div id="grade-detail-modal" style="display: none;">
    <div class="modal-overlay">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h3 id="detail-course-title">成绩详情</h3>
                <button class="close-btn" onclick="gradeReviewManager.closeDetailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="course-info" style="margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #eaeaea;">
                    <h4 id="detail-course-name"></h4>
                    <div style="display: flex; gap: 20px; margin-top: 10px; color: #6c757d;">
                        <span><i class="fas fa-calendar"></i> 学期: <span id="detail-semester"></span></span>
                        <span><i class="fas fa-user-tie"></i> 授课教师: <span id="detail-teacher"></span></span>
                        <span><i class="fas fa-users"></i> 学生人数: <span id="detail-student-count"></span></span>
                    </div>
                </div>
                
                <div class="grade-stats" style="margin-bottom: 30px;">
                    <h4>成绩统计</h4>
                    <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); margin-top: 15px;">
                        <div class="stat-item">
                            <div class="stat-icon-circle" style="background: #28a745;">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="stat-average">0</h3>
                                <p>平均分</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon-circle" style="background: #17a2b8;">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="stat-pass-rate">0%</h3>
                                <p>及格率</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon-circle" style="background: #ffc107;">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="stat-excellent-rate">0%</h3>
                                <p>优秀率(≥90)</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon-circle" style="background: #dc3545;">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="stat-warnings">0</h3>
                                <p>异常警告</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="warning-alerts" id="warning-alerts" style="margin-bottom: 30px;">
                    <!-- 异常警告将动态加载 -->
                </div>
                
                <div class="student-grades">
                    <h4>学生成绩列表</h4>
                    <div class="search-filter" style="padding: 15px 0; border-bottom: none;">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="search-student-grade" placeholder="搜索学生姓名或学号...">
                        </div>
                        <div class="filter-group">
                            <select id="filter-grade-range">
                                <option value="">所有分数</option>
                                <option value="90-100">优秀(90-100)</option>
                                <option value="80-89">良好(80-89)</option>
                                <option value="60-79">及格(60-79)</option>
                                <option value="0-59">不及格(0-59)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                        <table class="data-table" id="student-grades-table">
                            <thead>
                                <tr>
                                    <th>学号</th>
                                    <th>姓名</th>
                                    <th>平时成绩</th>
                                    <th>期中成绩</th>
                                    <th>期末成绩</th>
                                    <th>总评成绩</th>
                                    <th>等级</th>
                                    <th>状态</th>
                                </tr>
                            </thead>
                            <tbody id="student-grades-body">
                                <!-- 学生成绩数据将动态加载 -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="loading" id="grades-loading">
                        <div class="spinner"></div>
                    </div>
                    
                    <div class="empty-state" id="grades-empty" style="display: none;">
                        <i class="fas fa-graduation-cap"></i>
                        <h3>暂无成绩数据</h3>
                    </div>
                </div>
                
                <div class="form-actions" style="margin-top: 30px;">
                    <button class="btn btn-success" id="approve-grade-btn">
                        <i class="fas fa-check"></i> 审核通过
                    </button>
                    <button class="btn btn-danger" id="reject-grade-btn">
                        <i class="fas fa-times"></i> 退回修改
                    </button>
                    <button class="btn btn-outline" onclick="gradeReviewManager.closeDetailModal()">
                        取消
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>